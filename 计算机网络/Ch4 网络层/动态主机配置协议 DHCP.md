---
aliases:
  - 动态主机配置协议
  - DHCP
tags:
  - computerscience
chapter: Ch4 网络层
subject: "[[计算机网络]]"
category: "[[📖Notes]]"
---

DHCP 常用于给主机动态地分配 IP 地址，提供了即插即用地联网机制。**DHCP 是应用层协议，基于 [[UDP]]**。

>使用 [[UDP]] 是因为一开始客户机没有 IP 地址，不可能建立 [[TCP]] 连接。

## DHCP 服务器和 DHCP 客户的交换过程

| 序号  | 消息类型    | 来自       | 功能                      | 源地址        | 目的地址            | MAC地址             |
| --- | ------- | -------- | ----------------------- | ---------- | --------------- | ----------------- |
| 1.  | DHCP 发现 | DHCP 客户  | 试图找到一个 DHCP 服务器         | 0.0.0.0    | 255.255.255.255 | FF-FF-FF-FF-FF-FF |
| 2.  | DHCP 提供 | DHCP 服务器 | 其中包括提供给客户机的 IP 地址       | DHCP 服务器地址 | 255.255.255.255 | 客户端的 MAC 地址       |
| 3.  | DHCP 请求 | DHCP 客户  | 若接收该 IP 地址，则请求提供该 IP 地址 | 0.0.0.0    | 255.255.255.255 | FF-FF-FF-FF-FF-FF |
| 4.  | DHCP 确认 | DHCP 服务器 | 将该 IP 地址正式分配给客户机        | DHCP 服务器地址 | 255.255.255.255 | 客户端的 MAC 地址       |

>[!tip]
>客户机和服务器使用广播通信，因为在分配完成之前，客户机没有 IP 地址，所以只能使用广播。

---
tags:
  - computerscience
chapter: Ch4 网络层
subject: "[[计算机网络]]"
category: "[[📖Notes]]"
aliases:
---


移动 IP 技术是为了实现移动主机在各网络间漫游时，仍能保持**原来的 IP 地址**不变。

移动 IP 的基本工作过程可以分为代理发现、注册、分组路由与注销 4 个阶段。

## 移动 IP 的三种功能实体

1. 移动结点：具有永久 IP 地址的移动主机
2. 本地代理（归属代理）：通常是连接在归属网络（原始连接到的网络）上的[[路由器 Router]]，**归属代理会以自己的 MAC 地址应答对移动结点的 [[地址解析协议 ARP|ARP]] 请求**，以达到代理的功能
3. 外地代理：通常是连接在被访网络（移动到另一地点所接入的网络）上的路由器

## 移动 IP 通信过程

![](https://img.mileomni.com/1731243203402.png)

### 移动站 A 接收 IP 分组

1. 移动站 A在归属网络时，按照传统的 TCP/IP 方式进行通信
2. 移动站 A 漫游到外地网络时，向外地代理进行登记，获得一个临时的**转交地址**。外地代理要向 A 的归属代理登记该转交地址。
3. 归属代理知道 A 的转交地址后，构建一条通向转交地址的隧道，归属代理收到发给 A 的 IP 分组时进行再封装，通过隧道发给外地代理。
4. 外地代理收到后将 IP 分组拆封，恢复成原始的 IP 分组，然后发给移动站 A。

### 移动站 A 发送 IP 分组

移动站 A 使用自己的**永久地址**作为要发送的 IP 分组的源地址，通过**外地代理**，发送到目的主机。

>发送数据报不需要经过归属代理，因为外部代理就能发送，而[[路由器 Router]]不关心发送过程中的源地址。

### 移动站 A 更新归属代理

1. 移动站 A 移动到外地网络时，在新外地代理处登记，然后该外地代理将 A 的新转交地址发送给归属代理。无论如何移动，移动站 A 接收 IP 分组都是经过归属代理的
2. 移动站 A回到归属网络时，向归属代理注销转交地址
